<%- include('layouts/head.ejs') %>

<link rel="stylesheet" href="css\start.css">
<link rel="stylesheet" href="css\lib.css">

<div id="content">
  <div class="container">
    <header class=" header23">
      <div class="text-box">
        <h1 class="qwer">Images</h1>
      </div>
    </header>
<h1>Uploading images in Mongodb</h1>
<hr>
  <div>
    <form action="/image" method="POST" enctype="multipart/form-data">
      <div>
        <label for="name">Name</label>
        <input type="text" id="name" placeholder="name" value="" name="name" required>
      </div>
      <div>
        <label for="desc">Image Description</label>
                <textarea id="desc" name="pesc" value="" rows="2"
                          placeholder="Description" required>
                </textarea>
      </div>
      <div>
        <label for="image">Upload Image</label>
        <input type="file" id="image" name="image" value="" required>
    </div>
    <div>
        <button type="submit">Submit</button>
    </div>
      </form>
    </div>

<hr>
    <h1>Uploaded Images</h1>
    <div>
      <% items.forEach(function(image){ %>
        <div>
          <div>
                <img src="data:image/<%=image.img.contentType%>;base64,
                     <%=image.img.data.toString('base64')%>">
                <div>
                    <h5><%= image.name %></h5>
                    <p><%= image.desc %></p>
                </div>
            </div>
        </div>
        <%})%>
    </div>

  </div>
</div>

<%- include('layouts/foot.ejs') %>
